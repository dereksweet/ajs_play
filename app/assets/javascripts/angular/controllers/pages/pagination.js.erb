var moduleName = "paginationApp";
var controllerName = "paginationCtrl";

var paginationApp = angular.module(moduleName, ['angularUtils.directives.dirPagination']);

paginationCtrl = function ($scope, dataStoreService) {
  $scope.currentPage = 1;
  $scope.pagination_size = $('body').width() > 375 ? 25 : 8;

  $scope.loadCountries = function(newPageNumber) {
    $scope.currentPage = newPageNumber;

    var promise = dataStoreService.loadCountries(newPageNumber);

    promise.success(function (data, status) {
      if (data) {
        $scope.countryCount = data.total_entries;
        $scope.countries = data.models;
        document.activeElement.blur();
      }
      else {
        alert('error - no data');
      }
    });

    promise.error(function (data, status) {
      alert('error - communication issue (' + status + ')');
    });
  };
};
paginationCtrl.$inject = ['$scope', 'dataStoreService'];
paginationApp.controller(controllerName, paginationCtrl);
